schema: 1
tools:
  # Core
  clangd:
    role: core
    min_version: ">=17"
    provides: ["lsp", "xref", "refactor"]
    install:
      apt: ["clangd-18", "clangd-17", "clangd"]
      dnf: ["clang-tools-extra"]
      pacman: ["clang"]
      brew: ["llvm@18", "llvm"]
      nix: ["clang-tools_18", "clang-tools"]
    check:
      cmd: ["clangd", "--version"]
  clang-tidy:
    role: core
    min_version: ">=17"
    provides: ["lint", "analysis"]
    invocation:
      supports_json: true
      supports_sarif: true
      default_timeout_seconds: 120
      avg_latency_ms: 1500
    install:
      apt: ["clang-tidy-18", "clang-tidy", "clang-tools-extra"]
      dnf: ["clang-tools-extra"]
      pacman: ["clang"]
      brew: ["llvm@18", "llvm"]
      nix: ["clang-tools_18", "clang-tools"]
    check:
      cmd: ["clang-tidy", "--version"]
  rg:
    role: core
    min_version: ">=13"
    provides: ["search"]
    install:
      apt: ["ripgrep"]
      dnf: ["ripgrep"]
      pacman: ["ripgrep"]
      brew: ["ripgrep"]
      nix: ["ripgrep"]
    check:
      cmd: ["rg", "--version"]
  fd:
    role: core
    min_version: ">=8"
    provides: ["file-find"]
    install:
      apt: ["fd-find"]
      dnf: ["fd-find"]
      pacman: ["fd"]
      brew: ["fd"]
      nix: ["fd"]
    check:
      cmd: ["fdfind", "--version"]
  jq:
    role: core
    min_version: ">=1.6"
    provides: ["json"]
    install:
      apt: ["jq"]
      dnf: ["jq"]
      pacman: ["jq"]
      brew: ["jq"]
      nix: ["jq"]
    check:
      cmd: ["jq", "--version"]
  yq:
    role: core
    min_version: ">=4"
    provides: ["yaml"]
    install:
      apt: ["yq"]
      dnf: ["yq"]
      pacman: ["yq"]
      brew: ["yq"]
      nix: ["yq"]
    check:
      cmd: ["yq", "--version"]
  ccache:
    role: core
    min_version: ">=4"
    provides: ["cache"]
    install:
      apt: ["ccache"]
      dnf: ["ccache"]
      pacman: ["ccache"]
      brew: ["ccache"]
      nix: ["ccache"]
    fallbacks: ["sccache"]
    check:
      cmd: ["ccache", "--version"]
  mold:
    role: core
    min_version: ">=2"
    provides: ["linker"]
    install:
      apt: ["mold"]
      dnf: ["mold"]
      pacman: ["mold"]
      brew: ["mold"]
      nix: ["mold"]
    fallbacks: ["lld"]
    check:
      cmd: ["mold", "--version"]

  # Core build tools
  cmake:
    role: core
    min_version: ">=3.22"
    provides: ["build", "configure"]
    install:
      apt: ["cmake"]
      dnf: ["cmake"]
      pacman: ["cmake"]
      brew: ["cmake"]
      nix: ["cmake"]
    check:
      cmd: ["cmake", "--version"]
  ninja:
    role: core
    min_version: ">=1.10"
    provides: ["build-backend"]
    install:
      apt: ["ninja-build"]
      dnf: ["ninja-build"]
      pacman: ["ninja"]
      brew: ["ninja"]
      nix: ["ninja"]
    check:
      cmd: ["ninja", "--version"]
  bear:
    role: core
    min_version: ">=3"
    provides: ["compile-db"]
    install:
      apt: ["bear"]
      dnf: ["bear"]
      pacman: ["bear"]
      brew: ["bear"]
      nix: ["bear"]
    check:
      cmd: ["bear", "--version"]
  clang-format:
    role: core
    min_version: ">=17"
    provides: ["format"]
    install:
      apt: ["clang-format-18", "clang-format-17", "clang-format"]
      dnf: ["clang-tools-extra"]
      pacman: ["clang"]
      brew: ["llvm@18", "llvm"]
      nix: ["clang-tools_18", "clang-tools"]
    check:
      cmd: ["clang-format", "--version"]

  # Additional recommended tools from AGENTS.md
  fzf:
    role: recommended
    min_version: ">=0.35"
    provides: ["fuzzy-find"]
    install:
      apt: ["fzf"]
      dnf: ["fzf"]
      pacman: ["fzf"]
      brew: ["fzf"]
      nix: ["fzf"]
    check:
      cmd: ["fzf", "--version"]
  tree:
    role: recommended
    min_version: ">=1.8"
    provides: ["tree"]
    install:
      apt: ["tree"]
      dnf: ["tree"]
      pacman: ["tree"]
      brew: ["tree"]
      nix: ["tree"]
    check:
      cmd: ["tree", "--version"]
  git:
    role: core
    min_version: ">=2.30"
    provides: ["version-control"]
    install:
      apt: ["git"]
      dnf: ["git"]
      pacman: ["git"]
      brew: ["git"]
      nix: ["git"]
    check:
      cmd: ["git", "--version"]

  # Recommended
  include-what-you-use:
    role: recommended
    min_version: ">=0.20"
    provides: ["include-analysis"]
    install:
      apt: ["iwyu"]
      dnf: ["include-what-you-use"]
      pacman: ["include-what-you-use"]
      brew: ["include-what-you-use"]
      nix: ["include-what-you-use"]
    local_install:
      github_repo: "include-what-you-use/include-what-you-use"
      build_method: "cmake"
      dependencies:
        apt: ["clang-18-dev", "libclang-18-dev", "llvm-18-dev", "cmake", "python3"]
    check:
      cmd: ["include-what-you-use", "--version"]
  iwyu-tool:
    role: recommended
    min_version: ">=0.20"
    provides: ["include-analysis"]
    install:
      apt: ["iwyu"]  # iwyu-tool comes with iwyu package
      dnf: ["include-what-you-use"]
      pacman: ["include-what-you-use"]
      brew: ["include-what-you-use"]
      nix: ["include-what-you-use"]
    local_install:
      github_repo: "include-what-you-use/include-what-you-use"
      build_method: "cmake"
      binary_path: "iwyu_tool.py"
      dependencies:
        apt: ["clang-18-dev", "libclang-18-dev", "llvm-18-dev", "cmake", "python3"]
    check:
      cmd: ["iwyu_tool", "--help"]
  cppcheck:
    role: recommended
    min_version: ">=2.9"
    provides: ["static-analysis"]
    install:
      apt: ["cppcheck"]
      dnf: ["cppcheck"]
      pacman: ["cppcheck"]
      brew: ["cppcheck"]
      nix: ["cppcheck"]
    local_install:
      github_repo: "danmar/cppcheck"
      release_pattern: "cppcheck-{version}-linux.tar.gz"
      binary_path: "bin/cppcheck"
      checksums:
        "2.12.1": "skip"
        "2.18.0": "skip"
    check:
      cmd: ["cppcheck", "--version"]
  universal-ctags:
    role: recommended
    min_version: ">=6.0.0"
    provides: ["indexing"]
    install:
      apt: ["universal-ctags"]
      dnf: ["universal-ctags"]
      pacman: ["universal-ctags"]
      brew: ["universal-ctags"]
      nix: ["universal-ctags"]
    check:
      cmd: ["ctags", "--version"]
  zoxide:
    role: recommended
    min_version: ">=0.9"
    provides: ["jump"]
    check:
      cmd: ["zoxide", "-V"]
  bat:
    role: recommended
    min_version: ">=0.23"
    provides: ["pager"]
    install:
      apt: ["bat"]
      dnf: ["bat"]
      pacman: ["bat"]
      brew: ["bat"]
      nix: ["bat"]
    check:
      cmd: ["batcat", "--version"]
  tokei:
    role: recommended
    min_version: ">=12"
    provides: ["code-stats"]
    install:
      apt: []  # Not available in apt, will use local install
      dnf: ["tokei"]
      pacman: ["tokei"]
      brew: ["tokei"]
      nix: ["tokei"]
    local_install:
      github_repo: "XAMPPRocky/tokei"
      release_pattern: "tokei-x86_64-unknown-linux-gnu.tar.gz"
      binary_path: "tokei"
      version_tag: "v12.1.2"  # Use stable version with binary releases
    check:
      cmd: ["tokei", "--version"]
  hyperfine:
    role: recommended
    min_version: ">=1.15"
    provides: ["benchmark"]
    check:
      cmd: ["hyperfine", "--version"]
  entr:
    role: recommended
    min_version: ">=5.0"
    provides: ["watch"]
    fallbacks: ["watchexec"]
    check:
      cmd: ["entr", "-v"]
  pre-commit:
    role: recommended
    min_version: ">=3"
    provides: ["hooks"]
    check:
      cmd: ["pre-commit", "--version"]

  # Optional
  eza:
    role: optional
    min_version: ">=0.18"
    provides: ["ls"]
    check:
      cmd: ["eza", "--version"]
    fallbacks: ["exa", "lsd"]
  tree:
    role: optional
    min_version: ">=1.8"
    provides: ["tree"]
    check:
      cmd: ["tree", "--version"]
  procs:
    role: optional
    min_version: ">=0.12"
    provides: ["ps"]
    check:
      cmd: ["procs", "--version"]
  bottom:
    role: optional
    min_version: ">=0.9"
    provides: ["monitor"]
    check:
      cmd: ["btm", "--version"]
  httpie:
    role: optional
    min_version: ">=3"
    provides: ["http-client"]
    check:
      cmd: ["http", "--version"]
    fallbacks: ["xh"]
  tldr:
    role: optional
    min_version: ">=1.2"
    provides: ["docs"]
    check:
      cmd: ["tldr", "--version"]
  cheat:
    role: optional
    min_version: ">=4.4"
    provides: ["cheatsheets"]
    check:
      cmd: ["cheat", "--version"]
  difftastic:
    role: optional
    min_version: ">=0.55"
    provides: ["diff"]
    check:
      cmd: ["difft", "--version"]
  delta:
    role: optional
    min_version: ">=0.12"
    provides: ["git-pager"]
    check:
      cmd: ["delta", "--version"]
  cvise:
    role: recommended
    min_version: ">=2.9"
    provides: ["reducer"]
    install:
      apt: ["cvise"]
      dnf: ["cvise"]
      pacman: ["cvise"]
      brew: ["cvise"]
      nix: ["cvise"]
    check:
      cmd: ["cvise", "--version"]
  creduce:
    role: recommended
    min_version: ">=2.5"
    provides: ["reducer"]
    install:
      apt: ["creduce"]
      dnf: ["creduce"]
      pacman: ["creduce"]
      brew: ["creduce"]
      nix: ["creduce"]
    check:
      cmd: ["creduce", "--version"]
